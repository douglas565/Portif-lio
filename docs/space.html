<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Portfólio - Projetos</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2d3436;
            --secondary-color: #0984e3;
            --accent-color: #00cec9;
            --light-color: #f5f6fa;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--light-color);
            color: var(--primary-color);
        }
        
        .portfolio-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 3rem 0;
            margin-bottom: 3rem;
            border-radius: 0 0 20px 20px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .project-card {
            border: none;
            border-radius: 15px;
            overflow: hidden;
            transition: transform 0.3s, box-shadow 0.3s;
            margin-bottom: 2rem;
            background-color: white;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .project-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }
        
        .project-card .card-img-top {
            height: 180px;
            object-fit: cover;
        }
        
        .project-card .card-body {
            padding: 1.5rem;
        }
        
        .project-card .badge {
            background-color: var(--accent-color);
            margin-right: 5px;
            margin-bottom: 5px;
        }
        
        .github-stats {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            color: #636e72;
        }
        
        .github-stats span {
            font-size: 0.9rem;
        }
        
        .github-stats i {
            margin-right: 5px;
        }
        
        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 200px;
        }
        
        .spinner {
            width: 3rem;
            height: 3rem;
        }
        
        .filter-buttons {
            margin-bottom: 2rem;
        }
        
        .filter-btn {
            margin-right: 10px;
            margin-bottom: 10px;
            border-radius: 20px;
            padding: 5px 15px;
            border: 1px solid var(--secondary-color);
            color: var(--secondary-color);
            background: transparent;
            transition: all 0.3s;
        }
        
        .filter-btn.active, .filter-btn:hover {
            background-color: var(--secondary-color);
            color: white;
        }
        
        .no-projects {
            text-align: center;
            padding: 3rem;
            color: #636e72;
        }
    </style>
</head>
<body>
    <header class="portfolio-header text-center">
        <div class="container">
            <h1 class="display-4 fw-bold">Meus Projetos</h1>
            <p class="lead">Projetos públicos do meu GitHub</p>
            <a href="https://github.com/douglas565" target="_blank" class="btn btn-light btn-lg mt-3">
                <i class="fab fa-github"></i> Ver no GitHub
            </a>
        </div>
    </header>

    <div class="container">
        <div class="row mb-4">
            <div class="col-md-6">
                <h2 class="fw-bold">Portfólio</h2>
                <p class="text-muted">Explore meus projetos públicos no GitHub</p>
            </div>
            <div class="col-md-6 text-md-end">
                <div class="filter-buttons">
                    <button class="filter-btn active" data-filter="all">Todos</button>
                    <button class="filter-btn" data-filter="JavaScript">JavaScript</button>
                    <button class="filter-btn" data-filter="HTML">HTML/CSS</button>
                    <button class="filter-btn" data-filter="Python">Python</button>
                    <button class="filter-btn" data-filter="Other">Outros</button>
                </div>
            </div>
        </div>

        <div class="row" id="projects-container">
            <div class="loading">
                <div class="spinner-border text-primary" role="status">
                    <span class="visually-hidden">Carregando...</span>
                </div>
            </div>
        </div>
    </div>

    <a href="index.html" class="back-button">Voltar</a>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const username = 'douglas565';
            const projectsContainer = document.getElementById('projects-container');
            const filterButtons = document.querySelectorAll('.filter-btn');
            
            // Função para buscar repositórios do GitHub
            async function fetchGitHubRepos() {
                try {
                    const response = await fetch(`https://api.github.com/users/${username}/repos?sort=updated&direction=desc`);
                    const data = await response.json();
                    
                    if (response.ok) {
                        displayProjects(data);
                    } else {
                        throw new Error(data.message || 'Erro ao buscar projetos');
                    }
                } catch (error) {
                    projectsContainer.innerHTML = `
                        <div class="col-12 no-projects">
                            <i class="fas fa-exclamation-triangle fa-3x mb-3"></i>
                            <h3>Ocorreu um erro ao carregar os projetos</h3>
                            <p>${error.message}</p>
                        </div>
                    `;
                }
            }
            
            // Função para exibir os projetos
            function displayProjects(repos) {
                // Filtra apenas repositórios que não são forks e não estão vazios
                const filteredRepos = repos.filter(repo => !repo.fork && repo.size > 0);
                
                if (filteredRepos.length === 0) {
                    projectsContainer.innerHTML = `
                        <div class="col-12 no-projects">
                            <i class="fas fa-folder-open fa-3x mb-3"></i>
                            <h3>Nenhum projeto público encontrado</h3>
                            <p>Meus repositórios privados ou forks não são exibidos aqui.</p>
                        </div>
                    `;
                    return;
                }
                
                let projectsHTML = '';
                
                filteredRepos.forEach(repo => {
                    // Determina a linguagem principal ou define como "Outro"
                    const language = repo.language || 'Other';
                    
                    // Cria uma cor de fundo baseada na linguagem
                    const langClass = getLanguageClass(language);
                    
                    // Formata a descrição (remove emojis e limita o tamanho)
                    let description = repo.description || 'Sem descrição';
                    description = description.replace(/:[a-z_]+:/g, '').substring(0, 120);
                    if (description.length >= 120) description += '...';
                    
                    // Formata a data da última atualização
                    const updatedAt = new Date(repo.updated_at).toLocaleDateString('pt-BR');
                    
                    projectsHTML += `
                        <div class="col-md-6 col-lg-4 project-item" data-languages="${language.toLowerCase()}">
                            <div class="project-card card h-100">
                                <div class="card-img-top d-flex align-items-center justify-content-center" style="background-color: ${getLanguageColor(language)};">
                                    <i class="fab fa-github fa-5x" style="color: white; opacity: 0.7;"></i>
                                </div>
                                <div class="card-body d-flex flex-column">
                                    <h5 class="card-title">${repo.name}</h5>
                                    <p class="card-text flex-grow-1">${description}</p>
                                    <div>
                                        <span class="badge rounded-pill ${langClass}">${language}</span>
                                    </div>
                                    <div class="github-stats mt-2">
                                        <span><i class="fas fa-star"></i> ${repo.stargazers_count}</span>
                                        <span><i class="fas fa-code-branch"></i> ${repo.forks_count}</span>
                                        <span><i class="fas fa-calendar-alt"></i> ${updatedAt}</span>
                                    </div>
                                    <a href="${repo.html_url}" target="_blank" class="btn btn-outline-primary mt-3">Ver Projeto</a>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                projectsContainer.innerHTML = projectsHTML;
                
                // Adiciona eventos de filtro
                setupFilterButtons();
            }
            
            // Função para configurar os botões de filtro
            function setupFilterButtons() {
                filterButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        // Ativa o botão clicado e desativa os outros
                        filterButtons.forEach(btn => btn.classList.remove('active'));
                        this.classList.add('active');
                        
                        const filter = this.getAttribute('data-filter').toLowerCase();
                        const projectItems = document.querySelectorAll('.project-item');
                        
                        projectItems.forEach(item => {
                            const languages = item.getAttribute('data-languages');
                            
                            if (filter === 'all' || languages.includes(filter)) {
                                item.style.display = 'block';
                            } else {
                                item.style.display = 'none';
                            }
                        });
                    });
                });
            }
            
            // Função para obter a classe CSS baseada na linguagem
            function getLanguageClass(language) {
                const lang = language.toLowerCase();
                if (lang.includes('javascript')) return 'bg-javascript';
                if (lang.includes('html') || lang.includes('css')) return 'bg-html';
                if (lang.includes('python')) return 'bg-python';
                return 'bg-other';
            }
            
            // Função para obter uma cor baseada na linguagem
            function getLanguageColor(language) {
                const lang = language.toLowerCase();
                const colors = {
                    javascript: '#f1e05a',
                    typescript: '#3178c6',
                    python: '#3572A5',
                    html: '#e34c26',
                    css: '#563d7c',
                    java: '#b07219',
                    php: '#4F5D95',
                    ruby: '#701516',
                    c: '#555555',
                    'c++': '#f34b7d',
                    'c#': '#178600',
                    go: '#00ADD8',
                    rust: '#dea584',
                    swift: '#ffac45',
                    kotlin: '#F18E33',
                    default: '#6e5494' // Cor padrão (GitHub purple)
                };
                
                if (lang.includes('javascript')) return colors.javascript;
                if (lang.includes('typescript')) return colors.typescript;
                if (lang.includes('python')) return colors.python;
                if (lang.includes('html')) return colors.html;
                if (lang.includes('css')) return colors.css;
                if (colors[lang]) return colors[lang];
                
                return colors.default;
            }
            
            // Inicia a busca dos repositórios
            fetchGitHubRepos();
        });
    </script>
</body>
</html>